extends layout

block append title
  | #{ " - " + page.title}

block page_scripts
  script(src=contents.js.vendor['Wallop.min.js'].url)
  script(src=contents.js.vendor['Hammer.min.js'].url)
  script(Src=contents.js['plyr.js'].url)

block main
  //- Title block
  div(id="Pupil" class="Site-transform")
    a(name="top")

    - var page_data = contents.pupil['index.json']
    - var page_meta = page_data.metadata
    - var pupil_slides_data = contents.pupil.features['slides_pupil_drawings.json']
    - var pupil_slides_meta = pupil_slides_data.metadata
    
    //- slider 
    //- TODO - add bkg color class (not inline)
    //- TODO - pull slider images from json file and run in for loop
    - var slider_data = pupil_slides_meta
    div.Background-img-top.Background-img-cover
      figure(class="img-placeholder")
        div(class="Background-img--full-wh img-loaded img-small" style="background-image: url('data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAUAAD/4QMbaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlDNUQ2QTc0NUFCRjExRTZBNzMxQjg5Q0RDOTU0NUI2IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlDNUQ2QTczNUFCRjExRTZBNzMxQjg5Q0RDOTU0NUI2IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjQ0NkMwODJBQTc2RDMwNTg2MDNFRTZBQzVCM0QyRjA0IiBzdFJlZjpkb2N1bWVudElEPSI0NDZDMDgyQUE3NkQzMDU4NjAzRUU2QUM1QjNEMkYwNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEABIODg4QDhUQEBUeFBEUHiMaFRUaIyIZGRoZGSInHiMhISMeJycuMDMwLic+PkFBPj5BQUFBQUFBQUFBQUFBQUEBFBQUFhkWGxcXGxoWGhYaIRodHRohMSEhJCEhMT4tJycnJy0+ODszMzM7OEFBPj5BQUFBQUFBQUFBQUFBQUFBQf/AABEIAB4AKAMBIgACEQEDEQH/xAB4AAACAgMAAAAAAAAAAAAAAAAAAwUGAQIEAQEAAwAAAAAAAAAAAAAAAAACAAEDEAACAQMDAQMLBQAAAAAAAAABAgMAEQTwIRIxUWGBQZGh0eHxIjITJAVCYsJjFBEAAgMAAgMAAAAAAAAAAAAAAAERIQJBA3ESIv/aAAwDAQACEQMRAD8Amkjvr200RDXvrZRtS8yWSHGeSIXcDbYta/lsOyoUlLgeMZivIebRpZjGvfUakv5sBrASLdQpIUfCb77EV34kzzw8nFmVip2sDxPUb0U5HvEKTDR60aKew1o0UgGivtSM/MhxYfrTbr8oUWLEt0sL1xZcn5IRAYcRaQ9WJA4ju5NVXzTl8/uw4k/svfwpJJq2kF6aahNlqyJVChzLxABPHfXjUjjyxPChiYMlhYgj11Rco5xhi+uHVASD04kfpJtT8A5tx/iV+f7P5UMZVzpSa9vZqvnXr45Lsz9/p9tFR+M+e0P3UZSUGxsbhh2/C1FLmDOak//Z');")

        div(class="Background-img--full-wh img-large" data-src="../media/images/home/slides/03.jpg")   
      div(style="top:85%;").Site-content-container.Background-img-caption-container.u-textCenter
        h1.Background-img-caption Platform for eye tracking and egocentric vision research.

    //- half width slider
    section(style="background-color:#6f7679;")
      div.Site-content-container
        a(name="hardware")
        div.Feature-container-column
          div.Grid.Grid--center
            div.Grid-cell.Grid-cell--full
              div(style="color: white;").Feature
                h1 Hardware
                h4 Pupil Headsets are plug and play USB devices carefully designed to be lightweight, unobtrusive, and easy to use.
                h4 The hardware is strong and flexible. The 3d printed frame holds research grade cameras that record your field of view and your eye movements.
                h4 Our #[a(href="/store#pupil" style="color:#a1def0;" title="Pupil Store") versatile and modular system] is ready to be adapted to the specificities of your research or application requirements.
                
            div(style="color: white;").Grid-cell.Grid-cell--1of3

                //- p.Feature-paragraph Cameras record your field of view and your eye movements. Data is correlated with Pupil Capture software. 
                each slide, i in slider_data
                  - var text_class = (i == 0 ? "Feature-paragraph Wallop-txt Wallop-txt--current" : "Feature-paragraph Wallop-txt Wallop-txt--hidden")
                  h4(class=text_class)=slide.configuration_title + " - " + slide.configuration_text 

            div.Grid-cell.Grid-cell--2of3.u-padBottom--2
              div(id="pupil-headset-slider").Grid.Grid--center.Grid--align-ContentCenter.Wallop
                div.Wallop-list.Grid-cell.Grid-cell--full
                  each slide, i in slider_data    
                    - var slide_class = (i == 0 ? "Wallop-item Wallop-item--current" : "Wallop-item")
                    - var bkg_img = "background-image: url('"+slide.url+"');"
                    div(class=slide_class)
                      div(class="Background-img--full-w-grid Background-img-contain" style=bkg_img)

            div.Grid-cell.Grid-cell--full.u-textCenter.Wallop-pagination-container
              each slide, i in slider_data
                button.Wallop-dot

    //- software 
    //- div.Site-gray-bkg
    div.Site-content-container
      a(name="software")
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1 Software
              h3 Connect your Pupil headset to a Linux, MacOS, or Windows computer via USB 
          div.Grid-cell.Grid-cell--full

            div.Grid--gutters-lg.Aligner
              div.Aligner-item
                div.Aligner-item--column
                  div.Aligner-item--stretchHeight
                    h2 Record
                    p #[a(href="https://github.com/pupil-labs/pupil/releases/latest" title="Download Pupil Capture" rel="noopener") Pupil Capture] is the software used with your Pupil headset.
                    p Pupil Capture receives video and audio streams, detects your pupil, tracks your gaze, tracks markers in your environment, streams data in real-time over the network, and records data in an open format.

              div.Aligner-item
                div.Aligner-item--column
                  div.Aligner-item--stretchHeight
                    h2 Play
                    p #[a(href="https://github.com/pupil-labs/pupil/releases/latest" title="Download Pupil Player" rel="noopener") Pupil Player] is a media and data visualizer at its core. You will use it to look at Pupil Capture recordings. 
                    p Visualize your data and export it. All Pupil software is open-source. You can modify it or write your own plugins to suit your needs.
                    p Download the latest version of Pupil Player and test it out with our #[a(href="https://drive.google.com/uc?export=download&id=0Byap58sXjMVfZUhWbVRPWldEZm8" rel="noopener" title="Sample dataset download") sample dataset].

              include pupil-svg



    //- full width background image
    div.Grid
      div(class="Background-img--full-wh-grid Background-img-cover" style="background-image: url('../media/images/home/slides/01.jpg');")

    //- pupil mobile
    section(style="background-color:#6f7679;")
      div.Site-content-container
        a(name="pupil-mobile")
        div.Feature-container-column
          div.Grid.Grid--1of2.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
            div.Grid-cell
              div(style="color: white;").Feature
                h1 Pupil Mobile
                p Pupil Mobile enables you to connect your Pupil eye tracking headset to your Android device via USBC.
                p Preview video and other sensor streams on your Android device. Record video and other sensor streams locally on your Android device or stream data over your WiFi network to other computers (clients) running Pupil Capture.
                p Pupil Mobile is seamlessly integrated with Pupil Capture. You can use Pupil Capture to remotely monitor and control instances of Pupil Mobile.
                p Pupil Mobile is currently in public beta. Download it on the #[a(href="https://play.google.com/store/apps/details?id=com.pupillabs.pupilmobile&hl=en" style="color:#a1def0;" rel="noopener" title="Google Play Store") Google Play Store].

            div.Grid-cell
              div.Feature
                figure.Feature-figure
                  +webp-img("/media/images/pupil_page/web/pupil-mobile.webp", "Pupil Mobile on Nexus 5x" , "Pupil Mobile on Nexus 5x")

          div.Feature-video-container-16by9(style="margin-bottom:3em;margin-top:2em;" title="Introduction to Pupil Mobile" alt="Introduction to Pupil Mobile")
            video(class="plyr--polyfill" poster="/media/videos/pupil-mobile_promovid_1920x1080.jpg" controls playsinline)
              source(src="/media/videos/pupil-mobile_promovid_1920x1080.mp4" type="video/mp4")
              source(src="/media/videos/pupil-mobile_promovid_1920x1080.webm" type="video/webm")

    //- tech specs and performance
    div.Site-content-container
      a(name="technical-specs")
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1 Technical Specifications & Performance
              h4 Eye tracking performance is determined in equal parts by the hardware and software. 
              h4 We constantly work on our algorithms and codebase, so you can expect a steady improvement and the latest features. 
              h4 The headset is configurable with different cameras, so you can get the hardware you need: from high resolution capture at 30 hz to low latency (5.7ms) 120hz eye and world camera.


            div.Grid-cell.TechSpecs-container
              div.Grid-cell.TechSpecs--world
                table.TechSpecs-table-feature.TechSpecs-txt--world
                  tbody
                    tr
                      td.Table--column #[strong Gaze Accuracy]
                      td 0.60 degrees
                    tr
                      td.Table--column #[strong Gaze Precision]
                      td 0.08 degrees
                    tr
                      td.Table--column #[strong Pupil Tracking Technology]
                      td Dark pupil with 3d model
                    tr
                      td.Table--column #[strong Pupil Parameters]
                      td 2D position + 3D eye model parameters
                    tr
                      td.Table--column #[strong 2D Gaze Parameters]
                      td Normalized 2D gaze position
                    tr
                      td.Table--column #[strong 3D Gaze Parameters]
                      td 3D gaze rays + 3D gaze point through binocular vergence
                    tr
                      td.Table--column #[strong Pupil Diameter]
                      td Relative size in eye camera pixels + absolute size in mm through 3d eye model
                    tr
                      td.Table--column #[strong Calibration]
                      td 9-point and 5-point
                    tr
                      td.Table--column #[strong Sampling Frequency Eye Camera]
                      td 200hz
                    tr
                      td.Table--column #[strong Sampling Frequency World Camera]
                      td 30hz@1080p / 60hz@720p /120hz@vga
                    tr
                      td.Table--column #[strong Camera Latency]
                      td 4.5 ms
                    tr
                      td.Table--column #[strong Processing Latency]
                      td Depending on CPU typically > 3ms
                    tr
                      td.Table--column #[strong Slippage Compensation]
                      td Yes, through 3D eye model
                    tr
                      td.Table--column #[strong Recording]
                      td Pupil and gaze and user data + raw eye and world video
                    tr
                      td.Table--column #[strong Realtime Streaming]
                      td Pupil, gaze, user, and video data.
                    tr
                      td.Table--column #[strong Mobile Recording Device]
                      td Pupil Mobile on Android (Supported Devices: Nexus 5x, Nexus 6p, OnePlus 3 and Moto Z2)


            div.Feature.u-padTop--2
              h4 Navigate to the #[a(href='/store#pupil' title='Pupil Store - pupil configurator') store] to check all configurations,  technical specs, and download sample videos.
                  
    
      include includes/webp-img

    //- open source
    div.Site-gray-bkg
      div.Site-content-container
        a(name="open-source")
        div.Feature-container-column
        div.Grid.Grid--1of2.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell
            div.Feature
              h1 Open Source
              h4 We believe in open source. All Pupil code is released with open source licenses.
              h4 A lot of work went into making the software modular and accessible. The majority of the codebase is written in Python.
              h4 We have developed a plugin structure that enables you to extend Pupil Capture and Pupil Player to suit your needs. 
              h4 Check out the pupil repository on #[a(href="https://github.com/pupil-labs/pupil/" rel="noopener" title="Pupil repository on github") Github]. Read developer documentation on #[a(href="http://docs.pupil-labs.com/" rel="noopener" title="Pupil Docs") docs.pupil-labs.com].
          div.Grid-cell
            div.Feature
              figure.Feature-figure
                +webp-img("/media/images/pupil_page/web/pupil_source_code.png", "Pupil Plugin screenshot" , "Pupil Plugin screenshot")

    //- design
    div.Site-content-container
      a(name="design")
      div.Feature-container-column
        div.Grid.Grid--1of2.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell
            div.Feature
              h1 Design
              h4 A lot of design and engineering thought has gone into getting the ergonomics of the headset just right.
              h4 It is designed to fit snugly, securely, and comfortably. 
              h4 The headset and cameras can be adjusted to accommodate a wide range of users. The headset is made from laser sintered PA12, an extremely flexible, durable, and lightweight material.
          div.Grid-cell
            div.Feature
              figure.Feature-figure
                +webp-img("/media/images/pupil_page/web/frame_flex.jpg", "Pupil Headset" , "Pupil Headset")

    //- Modular & Hackable
    div.Site-gray-bkg    
      div.Site-content-container
        a(name="modular")
        div.Feature-container-column
        div.Grid.Grid--1of2.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
         div.Grid-cell
            div.Feature
              figure.Feature-figure
                figure.Feature-figure
                  +webp-img("/media/images/pupil_page/web/dev_explo_transp.png", "DIY Pupil Headset" , "DIY Pupil Headset")
                  
          div.Grid-cell
            div.Feature
              h1 Modular & Hackable
              h4 If we don't have the configuration you need, customize it yourself. Our camera mount geometry and electrical interface is #[a(href="http://docs.pupil-labs.com/#pupil-hardware-development" rel="noopener" title="Pupil Docs - Hardware Development") open]. 
              h4 We also like to work with users to create custom solutions. #[a(href="mailto:sales@pupil-labs.com" rel="noopener" title="Get in touch") Get in touch!]
              h4 If you're excited about SMD soldering and hacking: you can make your own Pupil DIY. 
              h4 #[a(href="https://www.shapeways.com/product/LQJJK2CHQ/pupil-mobile-eye-tracking-headset" rel="noopener" title="Pupil DIY frame on Shapeways") Buy the frame], #[a(href="https://docs.google.com/spreadsheets/d/1NRv2WixyXNINiq1WQQVs5upn20jakKyEl1R8NObrTgU/pub?single=true&gid=0&output=html" rel="noopener" title="Source parts") source parts], and #[a(href="http://docs.pupil-labs.com/#diy" rel="noopener" title="Pupil Docs - DIY") follow assembly instructions] to build your own Pupil DIY headset.


    //- Commercial Use & Dedicated Support
    div(id="content-top" class="Site-content-container")
      a(name="support")
      div.Feature-container-column
        div.Grid.Grid--justifyCenter.Grid--center.Grid--alignContentCenter.Feature-row
          div.Grid-cell.Grid-cell--full
            div.Feature
              h1 Commercial Use & Dedicated Support
              h4 We offer dedicated email and video training and support packages. 
              h4 See support packages in the #[a(href='/store#additional-products' title='Pupil Store - support packages') store]. 
              h4 We offer use licenses to commercial users.
              h4 #[a(href="mailto:sales@pupil-labs.com" title='Contact us') Contact us] to discuss custom licensing options.


